<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
</head>
<body>

<h2>Expense Tracker</h2>

<h3>Add Expense</h3>

<input id="title" placeholder="Title"><br><br>
<input id="amount" placeholder="Amount" type="number"><br><br>
<input id="category" placeholder="Category"><br><br>
<input id="date" type="date"><br><br>
<input id="description" placeholder="Description"><br><br>

<button onclick="addExpense()">Add Expense</button>

<hr>

<h3>Expenses</h3>

<select id="month">
    <option value="">All</option>
    <option value="1">January</option>
    <option value="2">February</option>
    <option value="3">March</option>
    <option value="4">April</option>
    <option value="5">May</option>
    <option value="6">June</option>
    <option value="7">July</option>
    <option value="8">August</option>
    <option value="9">September</option>
    <option value="10">October</option>
    <option value="11">November</option>
    <option value="12">December</option>
</select>

<button onclick="loadExpenses()">Load Expenses</button>

<ul id="expenseList"></ul>


<script>
function loadExpenses() {
    let month = document.getElementById("month").value;

    let url = "/api/expenses";
    if (month !== "") {
        url += "?month=" + month;
    }

    fetch(url)
        .then(res => res.json())
        .then(data => {
            let list = document.getElementById("expenseList");
            list.innerHTML = "";

            if (data.length === 0) {
                list.innerHTML = "<li>No expenses found</li>";
                return;
            }

            data.forEach(e => {
                let li = document.createElement("li");
                li.innerText = "Title: "+e.title + 
                "| Amount: " + e.amount+
                "| Category: " +e.category+
                "| Date: " +e.date+
                "| Description: " +e.description;
                list.appendChild(li);
            });
        });
}
function addExpense() {

    let expense = {
        title: document.getElementById("title").value,
        amount: document.getElementById("amount").value,
        category: document.getElementById("category").value,
        date: document.getElementById("date").value,
        description: document.getElementById("description").value
    };

    fetch("/api/expenses", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(expense)
    })
    .then(() => {
        loadExpenses();
        alert("Expense Added");
    });
}
</script>

</body>
</html>
